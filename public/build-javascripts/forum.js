!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.pica=e()}}(function(){return function e(t,r,i){function n(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(e){var r=t[o][1][e];return n(r?r:e)},l,l.exports,e,t,r,i)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t){"use strict";t.exports=function(){return document.createElement("canvas")}},{}],2:[function(e,t){"use strict";var r=1;t.exports=function(){return r++}},{}],3:[function(e,t){"use strict";function r(e){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0}var i=2e3,n=500;r.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():(e=this.create(),e.id=this.lastId++,e.release=function(){t.release(e)}),this.acquired[e.id]=e,e},r.prototype.release=function(e){delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout(this.gc.bind(this),n))},r.prototype.gc=function(){var e=Date.now();this.available=this.available.filter(function(t){return!(e-t.lastUsed>i&&(t.destroy(),1))}),this.timeoutId=0!==this.available.length?setTimeout(this.gc.bind(this),n):0},t.exports=r},{}],4:[function(e,t){"use strict";function r(e){return 0>e?0:e>255?255:e}function i(e){return Math.round(e*((1<<d)-1))}function n(e,t,r,n,a){var o,s,u,d,h,c,f,g,p,m,v,b,w,y,x,E,S,T=l[e].filter,R=1/n,I=Math.min(1,n),P=l[e].win/I,M=Math.floor(2*(P+1)),C=new Int16Array((M+2)*r),_=0;for(o=0;r>o;o++){for(s=(o+.5)*R+a,u=Math.max(0,Math.floor(s-P)),d=Math.min(t-1,Math.ceil(s+P)),h=d-u+1,c=new Float32Array(h),f=new Int16Array(h),g=0,p=u,m=0;d>=p;p++,m++)v=T((p+.5-s)*I),g+=v,c[m]=v;for(b=0,m=0;m<c.length;m++)w=c[m]/g,b+=w,f[m]=i(w);for(f[r>>1]+=i(1-b),y=0;y<f.length&&0===f[y];)y++;if(y<f.length){for(x=f.length-1;x>0&&0===f[x];)x--;E=u+y,S=x-y+1,C[_++]=E,C[_++]=S,C.set(f.subarray(y,x+1),_),_+=S}else C[_++]=0,C[_++]=0}return C}function a(e,t,i,n,a,o){var s,u,d,l,h,c,f,g,p,m,v,b=0,w=0;for(p=0;n>p;p++){for(h=0,m=0;a>m;m++){for(c=o[h++],f=o[h++],g=b+4*c|0,s=u=d=l=0;f>0;f--)v=o[h++],l=l+v*e[g+3]|0,d=d+v*e[g+2]|0,u=u+v*e[g+1]|0,s=s+v*e[g]|0,g=g+4|0;t[w+3]=r(l+8192>>14),t[w+2]=r(d+8192>>14),t[w+1]=r(u+8192>>14),t[w]=r(s+8192>>14),w=w+4*n|0}w=4*(p+1)|0,b=(p+1)*i*4|0}}function o(e,t,i,n,a,o){var s,u,d,l,h,c,f,g,p,m,v,b=0,w=0;for(p=0;n>p;p++){for(h=0,m=0;a>m;m++){for(c=o[h++],f=o[h++],g=b+4*c|0,s=u=d=l=0;f>0;f--)v=o[h++],l=l+v*e[g+3]|0,d=d+v*e[g+2]|0,u=u+v*e[g+1]|0,s=s+v*e[g]|0,g=g+4|0;t[w+3]=r(l+8192>>14),t[w+2]=r(d+8192>>14),t[w+1]=r(u+8192>>14),t[w]=r(s+8192>>14),w=w+4*n|0}w=4*(p+1)|0,b=(p+1)*i*4|0}}function s(e,t,r){for(var i=3,n=t*r*4|0;n>i;)e[i]=255,i=i+4|0}function u(e){var t=e.src,r=e.width,i=e.height,u=e.toWidth,d=e.toHeight,l=e.scaleX||e.toWidth/e.width,h=e.scaleY||e.toHeight/e.height,c=e.offsetX||0,f=e.offsetY||0,g=e.dest||new Uint8Array(u*d*4),p="undefined"==typeof e.quality?3:e.quality,m=e.alpha||!1;if(1>r||1>i||1>u||1>d)return[];var v=n(p,r,u,l,c),b=n(p,i,d,h,f),w=new Uint8Array(u*i*4);return a(t,w,r,i,u,v),o(w,g,i,u,d,b),m||s(g,u,d),g}var d=14,l=[{win:.5,filter:function(e){return e>=-.5&&.5>e?1:0}},{win:1,filter:function(e){if(-1>=e||e>=1)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(-2>=e||e>=2)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(-3>=e||e>=3)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}];t.exports=u},{}],5:[function(e,t){"use strict";function r(e,t,r){for(var i,n,a,o,s,u=t*r,d=new Uint16Array(u),l=0;u>l;l++)i=e[4*l],n=e[4*l+1],a=e[4*l+2],s=i>=n&&i>=a?i:n>=a&&n>=i?n:a,o=n>=i&&a>=i?i:a>=n&&i>=n?n:a,d[l]=257*(s+o)>>1;return d}function i(e,t,i,a,o,s){var u,d,l,h,c,f,g,p,m,v,b,w,y;if(!(0===a||.5>o)){o>2&&(o=2);var x=r(e,t,i),E=new Uint16Array(x);n(E,t,i,o);for(var S=a/100*4096+.5|0,T=257*s|0,R=t*i,I=0;R>I;I++)w=2*(x[I]-E[I]),Math.abs(w)>=T&&(y=4*I,u=e[y],d=e[y+1],l=e[y+2],p=u>=d&&u>=l?u:d>=u&&d>=l?d:l,g=d>=u&&l>=u?u:u>=d&&l>=d?d:l,f=257*(p+g)>>1,g===p?h=c=0:(c=32767>=f?4095*(p-g)/(p+g)|0:4095*(p-g)/(510-p-g)|0,h=u===p?65535*(d-l)/(6*(p-g))|0:d===p?21845+(65535*(l-u)/(6*(p-g))|0):43690+(65535*(u-d)/(6*(p-g))|0)),f+=S*w+2048>>12,f>65535?f=65535:0>f&&(f=0),0===c?u=d=l=f>>8:(v=32767>=f?f*(4096+c)+2048>>12:f+((65535-f)*c+2048>>12),m=2*f-v>>8,v>>=8,b=h+21845&65535,u=b>=43690?m:b>=32767?m+(6*(v-m)*(43690-b)+32768>>16):b>=10922?v:m+(6*(v-m)*b+32768>>16),b=65535&h,d=b>=43690?m:b>=32767?m+(6*(v-m)*(43690-b)+32768>>16):b>=10922?v:m+(6*(v-m)*b+32768>>16),b=h-21845&65535,l=b>=43690?m:b>=32767?m+(6*(v-m)*(43690-b)+32768>>16):b>=10922?v:m+(6*(v-m)*b+32768>>16)),e[y]=u,e[y+1]=d,e[y+2]=l)}}var n=e("glur/mono16");t.exports=i,t.exports.lightness=r},{"glur/mono16":11}],6:[function(e,t){"use strict";function r(e){var t=Math.round(e);return Math.abs(e-t)<n?t:Math.floor(e)}function i(e){var t=Math.round(e);return Math.abs(e-t)<n?t:Math.ceil(e)}var n=1e-5;t.exports.createRegions=function(e){var t,n,a,o,s,u,d,l=e.toWidth/e.width,h=e.toHeight/e.height,c=r(e.srcTileSize*l)-2*e.destTileBorder,f=r(e.srcTileSize*h)-2*e.destTileBorder,g=[];for(o=0;o<e.toHeight;o+=f)for(a=0;a<e.toWidth;a+=c)t=a-e.destTileBorder,0>t&&(t=0),s=a+c+e.destTileBorder-t,t+s>=e.toWidth&&(s=e.toWidth-t),n=o-e.destTileBorder,0>n&&(n=0),u=o+f+e.destTileBorder-n,n+u>=e.toHeight&&(u=e.toHeight-n),d={toX:t,toY:n,toWidth:s,toHeight:u,toInnerX:a,toInnerY:o,toInnerWidth:c,toInnerHeight:f,offsetX:t/l-r(t/l),offsetY:n/h-r(n/h),scaleX:l,scaleY:h,x:r(t/l),y:r(n/h),width:i(s/l),height:i(u/h)},g.push(d);return g},t.exports.eachLimit=function(e,t,r,i){function n(t){if(!s){if(t)return s=!0,void i(t);o++,o===e.length?i():a<e.length&&r(e[a++],n)}}0===e.length&&i();for(var a=0,o=0,s=!1;t>a&&a<e.length;)r(e[a++],n)}},{}],7:[function(e,t){"use strict";t.exports=function(t){var r=e("./resize_array"),i=e("./unsharp");t.onmessage=function(e){var n=e.data;n.dest=new Uint8Array(n.toWidth*n.toHeight*4),r(n),n.unsharpAmount&&i(n.dest,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),t.postMessage({output:n.dest},[n.dest.buffer])}}},{"./resize_array":4,"./unsharp":5}],8:[function(e,t){"use strict";function r(e,t,r,h){var c=t.getContext("2d",{alpha:Boolean(r.alpha)}),f=u();f.width=Math.min(d,e.width),f.height=Math.min(d,e.height);var g=f.getContext("2d",{alpha:Boolean(r.alpha)});g.globalCompositeOperation="copy";var p=a({width:e.naturalWidth||e.width,height:e.naturalHeight||e.height,srcTileSize:d,toWidth:t.width,toHeight:t.height,destTileBorder:Math.ceil(Math.max(l,2.5*r.unsharpRadius|0))});return o(p,1,function(t,a){g.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var o=g.getImageData(0,0,t.width,t.height),s=c.createImageData(t.toWidth,t.toHeight),u={src:o.data,dest:s.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold};i(u),r.unsharpAmount&&n(u.dest,u.toWidth,u.toHeight,u.unsharpAmount,u.unsharpRadius,u.unsharpThreshold),c.putImageData(s,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),a()},h),s()}var i=e("./js/resize_array"),n=e("./js/unsharp"),a=e("./js/utils").createRegions,o=e("./js/utils").eachLimit,s=e("./js/generate_id"),u=e("./js/create_canvas"),d=1024,l=3;t.exports=r,t.exports.terminate=function(){}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/resize_array":4,"./js/unsharp":5,"./js/utils":6}],9:[function(e,t){"use strict";function r(e,t,r,i){var n=t.getContext("2d",{alpha:Boolean(r.alpha)}),a=d();a.width=Math.min(h,e.naturalWidth||e.width),a.height=Math.min(h,e.naturalHeight||e.height);var l=a.getContext("2d",{alpha:Boolean(r.alpha)});l.globalCompositeOperation="copy";var m=o({width:e.naturalWidth||e.width,height:e.naturalHeight||e.height,srcTileSize:h,toWidth:t.width,toHeight:t.height,destTileBorder:Math.ceil(Math.max(c,2.5*r.unsharpRadius|0))}),v=1;"undefined"!=typeof navigator&&(v=navigator.hardwareConcurrency||1);var b=r._id||u();return p[b]=!0,s(m,v,function(t,i){l.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var a=l.getImageData(0,0,t.width,t.height),o={src:a.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold},s=g.acquire();s.value.onmessage=function(e){var r,a,o,u,d;if(s.release(),!p[b])return void i(!0);if(e.data.err)return void i(e.data.err);if(o=n.createImageData(t.toWidth,t.toHeight),u=e.data.output,d=o.data,d.set)d.set(u);else for(r=0,a=u.length;a>r;r++)d[r]=u[r];f?n.putImageData(o,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):n.putImageData(o,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),i()},s.value.postMessage(o,[o.src.buffer])},function(e){p[b]&&(delete p[b],i(e))}),b}function i(e){p[e]&&delete p[e]}var n=e("webworkify"),a=e("./js/worker.js"),o=e("./js/utils").createRegions,s=e("./js/utils").eachLimit,u=e("./js/generate_id"),d=e("./js/create_canvas"),l=e("./js/pool"),h=1024,c=3,f=!1;try{f=-1!==navigator.userAgent.indexOf("Safari")}catch(e){}var g=new l(function(){return{value:n(a),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}),p={};t.exports=r,t.exports.terminate=i},{"./js/create_canvas":1,"./js/generate_id":2,"./js/pool":3,"./js/utils":6,"./js/worker.js":7,webworkify:13}],10:[function(e,t){"use strict";function r(e){try{(window.console.error||window.console.log).call(window.console,e)}catch(e){}}function i(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("gl error "+t)}function n(e){return e.getContext("webgl")||e.getContext("experimental-webgl")}function a(e,t,i){var n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(r("Shader compile error: "+e.getShaderInfoLog(n)+". Source: `"+i+"`"),e.deleteShader(n),null)}function o(e,t,n){var a=e.createProgram();return e.attachShader(a,t),e.attachShader(a,n),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(r("Program linking error: "+e.getProgramInfoLog(a)),e.deleteProgram(a)),i(e),a}function s(e,t,r,n,a){var o=e.getAttribLocation(t,r);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,a.elementSize,e.FLOAT,!1,0,0),i(e)}function u(e,t,r,i){var n=e.getUniformLocation(t,r);e.uniform1i(n,i)}function d(e,t,r,i,n){var a=e.getUniformLocation(t,r);e.uniform2f(a,i,n)}function l(e,t,r){var n=e.createTexture();return e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),i(e),n}function h(e,t,r,n){var a=e.createTexture();return e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,n,0,e.RGBA,e.UNSIGNED_BYTE,null),i(e),a}function c(e,t,r,n){var a=h(e,t,r,n),o=e.getParameter(e.FRAMEBUFFER_BINDING),s=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),i(e),{fbo:s,texture:a,oldFbo:o}}function f(e,t,r,i){var n=e,a=e+r,o=t,s=t+i;return[n,o,a,o,n,s,n,s,a,o,a,s]}function g(e){function t(e){return e.toFixed(20)}for(var r=y["#fsh-lanczos1d-optimized-tpl"],i=e.direction,n=e.texW/e.destW,a=e.texH/e.destH,o="horizontal"===i?n:a,s=3,u=x[s].filter,d=x[s].win,l="horizontal"===i,h=1/e.texW,c=1/e.texH,f=l?h:c,g=2*Math.ceil(d*o),p="float total = 0.0;\ngl_FragColor = vec4(0.0);\n",m=0;g+1>m;m++){var v=m-g/2,b=v/o,w=u(b),E=f*v,S=l?E:0,T=l?0:E;p+="addPoint(vec2("+t(S)+", "+t(T)+"), "+t(w)+", total);\n"}p+="gl_FragColor /= vec4(total);";var R=r.replace("__CODE__",p);return R}function p(e,t){var r=a(e,e.VERTEX_SHADER,y["#vsh-basic"]),i=a(e,e.FRAGMENT_SHADER,g(t));return o(e,r,i)}function m(e,t,r,n,a,o,l,h,g){var m={direction:o,texW:r,texH:n,destW:l,destH:h},v=p(e,m);e.useProgram(v),u(e,v,"u_image",t),d(e,v,"u_resolution",l,h),s(e,v,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),s(e,v,"a_position",g?f(0,h,l,-h):f(0,0,l,h),{elementSize:2}),e.viewport(0,0,l,h);var b=c(e,a,l,h);return e.viewport(0,0,l,h),e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,b.oldFbo),i(e),b}function v(e,t,r){var i=e.naturalWidth||e.width,n=e.naturalHeight||e.height,a=t.canvas.width,o=t.canvas.height,s=0,u=1,d=2;l(t,s,e),m(t,s,i,n,u,"horizontal",a,n,!1);var h=m(t,u,a,n,d,"vertical",a,o,!0);t.flush();var c=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,c),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,h.texture,0);var f=t.checkFramebufferStatus(t.FRAMEBUFFER);if(f!==t.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+f);r.alpha||(t.clearColor(1,1,1,1),t.colorMask(!1,!1,!1,!0),t.clear(t.COLOR_BUFFER_BIT));var g=new Uint8Array(a*o*4);t.readPixels(0,0,a,o,t.RGBA,t.UNSIGNED_BYTE,g);var p="undefined"==typeof r.unsharpAmount?0:0|r.unsharpAmount,v="undefined"==typeof r.unsharpRadius?0:r.unsharpRadius,w="undefined"==typeof r.unsharpThreshold?0:0|r.unsharpThreshold;return p&&b(g,a,o,p,v,w),g}var b=e("./js/unsharp"),w=e("./js/generate_id"),y={};y["#vsh-basic"]="precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n",y["#fsh-lanczos1d-optimized-tpl"]="precision highp float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image;\n\n#define addPoint(offset, kv, total)   {vec2 pos = v_texCoord + offset; gl_FragColor += texture2D(u_image, pos) * kv; total += kv; }\n\nvoid main()\n{\n__CODE__\n}\n";var x=[{win:.5,filter:function(e){return e>=-.5&&.5>e?1:0}},{win:1,filter:function(e){if(-1>=e||e>=1)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(-2>=e||e>=2)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(-3>=e||e>=3)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}];t.exports=function(e,t,i,a){var o,s;try{s=document.createElement("canvas"),s.id="pica-webgl-temporarry-canvas",s.height=t.height,s.width=t.width,document.body.appendChild(s),o=n(s);var u=v(e,o,i);o.finish(),document.body.removeChild(s);var d=t.getContext("2d"),l=d.createImageData(t.width,t.height);l.data.set(u),d.putImageData(l,0,0),a(null,u)}catch(e){r(e),o.finish(),document.body.removeChild(s),a(e)}return w()},t.exports.terminate=function(){}},{"./js/generate_id":2,"./js/unsharp":5}],11:[function(e,t){function r(e){.5>e&&(e=.5);var t=Math.exp(.527076)/e,r=Math.exp(-t),i=Math.exp(-2*t),n=(1-r)*(1-r)/(1+2*t*r-i);return a=n,o=n*(t-1)*r,s=n*(t+1)*r,u=-n*i,d=2*r,l=-i,h=(a+o)/(1-d-l),c=(s+u)/(1-d-l),new Float32Array([a,o,s,u,d,l,h,c])}function i(e,t,r,i,n,a){var o,s,u,d,l,h,c,f,g,p,m,v,b,w;for(g=0;a>g;g++){for(h=g*n,c=g,f=0,o=e[h],l=o*i[6],d=l,m=i[0],v=i[1],b=i[4],w=i[5],p=0;n>p;p++)s=e[h],u=s*m+o*v+d*b+l*w,l=d,d=u,o=s,r[f]=d,f++,h++;for(h--,f--,c+=a*(n-1),o=e[h],l=o*i[7],d=l,s=o,m=i[2],v=i[3],p=n-1;p>=0;p--)u=s*m+o*v+d*b+l*w,l=d,d=u,o=s,s=e[h],t[c]=r[f]+d,h--,f--,c-=a}}function n(e,t,n,a){if(a){var o=new Uint16Array(e.length),s=new Float32Array(Math.max(t,n)),u=r(a);i(e,o,s,u,t,n,a),i(o,e,s,u,n,t,a)}}var a,o,s,u,d,l,h,c;t.exports=n},{}],12:[function(e,t){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;10>r;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==i.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}var n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(e){for(var t,i,o=r(e),s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var u in t)n.call(t,u)&&(o[u]=t[u]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(t);for(var d=0;d<i.length;d++)a.call(t,i[d])&&(o[i[d]]=t[i[d]])}}return o}},{}],13:[function(e,t){var r=arguments[3],i=arguments[4],n=arguments[5],a=JSON.stringify;t.exports=function(e,t){function o(e){m[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];m[r]||o(r)}}for(var s,u=Object.keys(n),d=0,l=u.length;l>d;d++){var h=u[d],c=n[h].exports;if(c===e||c&&c["default"]===e){s=h;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},d=0,l=u.length;l>d;d++){var h=u[d];f[h]=h}i[s]=[Function(["require","module","exports"],"("+e+")(self)"),f]}var g=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[s]=s,i[g]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),p];var m={};o(g);var v="("+r+")({"+Object.keys(m).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(g)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,w=new Blob([v],{type:"text/javascript"});if(t&&t.bare)return w;var y=b.createObjectURL(w),x=new Worker(y);return x.objectURL=y,x}},{}],"/":[function(e,t,r){"use strict";function i(e){return Object.prototype.toString.call(e)}function n(e){return"[object Function]"===i(e)}function a(e,t,i,o){if(n(i)&&(o=i,i={}),isNaN(i)||(i={quality:i,alpha:!1}),h||(r.WEBGL=!1),h&&r.WEBGL){r.debug("Resize canvas with WebGL");var s=g(e,t,i,function(n){n?(r.debug("WebGL resize failed, do fallback and cancel next attempts"),r.debug(n),h=!1,a(e,t,v({},i,{_id:s}),o)):o()});return s}return u||(r.WW=!1),u&&r.WW?(r.debug("Resize buffer in WebWorker"),f(e,t,i,o)):(r.debug("Resize buffer sync (freeze event loop)"),c(e,t,i,o))}function o(e,t){var r={src:e.src,dest:e.dest,width:0|e.width,height:0|e.height,toWidth:0|e.toWidth,toHeight:0|e.toHeight,quality:e.quality,alpha:e.alpha,unsharpAmount:e.unsharpAmount,unsharpRadius:e.unsharpRadius,unsharpThreshold:e.unsharpThreshold};r.dest=p(r),r.unsharpAmount&&m(r.dest,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),t(null,r.dest)}function s(e){c.terminate(e),f.terminate(e),g.terminate(e)}var u="undefined"!=typeof window&&"Worker"in window;if(u)try{var d=e("webworkify")(function(){});d.terminate()}catch(e){u=!1}var l,h=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(l=document.createElement("canvas"),(l.getContext("webgl")||l.getContext("experimental-webgl"))&&(h=!0))}catch(e){}finally{l=null}var c=e("./lib/resize_js"),f=e("./lib/resize_js_ww"),g=e("./lib/resize_webgl"),p=e("./lib/js/resize_array"),m=e("./lib/js/unsharp"),v=e("object-assign");r.resizeCanvas=a,r.resizeBuffer=o,r.terminate=s,r.WW=u,r.WEBGL=!1,r.debug=function(){}},{"./lib/js/resize_array":4,"./lib/js/unsharp":5,"./lib/resize_js":8,"./lib/resize_js_ww":9,"./lib/resize_webgl":10,"object-assign":12,webworkify:13}]},{},[])("/")}),!function(e){"use strict";var t=function(e,r,i){var n,a,o=document.createElement("img");if(o.onerror=r,o.onload=function(){!a||i&&i.noRevoke||t.revokeObjectURL(a),r&&r(t.scale(o,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))n=a=t.createObjectURL(e),o._type=e.type;else{if("string"!=typeof e)return!1;n=e,i&&i.crossOrigin&&(o.crossOrigin=i.crossOrigin)}return n?(o.src=n,o):t.readFile(e,function(e){var t=e.target;t&&t.result?o.src=t.result:r&&r(e)})},r=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e,t){var r,i,n,a,o=t.aspectRatio;if(!o)return t;r={};for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r.crop=!0,n=e.naturalWidth||e.width,a=e.naturalHeight||e.height,n/a>o?(r.maxWidth=a*o,r.maxHeight=a):(r.maxWidth=n,r.maxHeight=n/o),r},t.renderImageToCanvas=function(e,t,r,i,n,a,o,s,u,d){return e.getContext("2d").drawImage(t,r,i,n,a,o,s,u,d),e},t.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},t.scale=function(e,r){function i(){var e=Math.max((s||y)/y,(u||x)/x);e>1&&(y*=e,x*=e)}function n(){var e=Math.min((a||y)/y,(o||x)/x);1>e&&(y*=e,x*=e)}r=r||{};var a,o,s,u,d,l,h,c,f,g,p,m=document.createElement("canvas"),v=e.getContext||t.hasCanvasOption(r)&&m.getContext,b=e.naturalWidth||e.width,w=e.naturalHeight||e.height,y=b,x=w;if(v&&(r=t.getTransformedOptions(e,r),h=r.left||0,c=r.top||0,r.sourceWidth?(d=r.sourceWidth,void 0!==r.right&&void 0===r.left&&(h=b-d-r.right)):d=b-h-(r.right||0),r.sourceHeight?(l=r.sourceHeight,void 0!==r.bottom&&void 0===r.top&&(c=w-l-r.bottom)):l=w-c-(r.bottom||0),y=d,x=l),a=r.maxWidth,o=r.maxHeight,s=r.minWidth,u=r.minHeight,v&&a&&o&&r.crop?(y=a,x=o,p=d/l-a/o,0>p?(l=o*d/a,void 0===r.top&&void 0===r.bottom&&(c=(w-l)/2)):p>0&&(d=a*l/o,void 0===r.left&&void 0===r.right&&(h=(b-d)/2))):((r.contain||r.cover)&&(s=a=a||s,u=o=o||u),r.cover?(n(),i()):(i(),n())),v){if(f=r.pixelRatio,f>1&&(m.style.width=y+"px",m.style.height=x+"px",y*=f,x*=f,m.getContext("2d").scale(f,f)),g=r.downsamplingRatio,g>0&&1>g&&d>y&&l>x)for(;d*g>y;)m.width=d*g,m.height=l*g,t.renderImageToCanvas(m,e,h,c,d,l,0,0,m.width,m.height),d=m.width,l=m.height,e=document.createElement("canvas"),e.width=d,e.height=l,t.renderImageToCanvas(e,m,0,0,d,l,0,0,d,l);return m.width=y,m.height=x,t.transformCoordinates(m,r),t.renderImageToCanvas(m,e,h,c,d,l,0,0,y,x)}return e.width=y,e.height=x,e},t.createObjectURL=function(e){return r?r.createObjectURL(e):!1},t.revokeObjectURL=function(e){return r?r.revokeObjectURL(e):!1},t.readFile=function(e,t,r){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,r=r||"readAsDataURL",i[r])return i[r](e),i}return!1},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.loadImage=t}(window),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):e("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption,r=e.transformCoordinates,i=e.getTransformedOptions;e.hasCanvasOption=function(r){return!!r.orientation||t.call(e,r)},e.transformCoordinates=function(t,i){r.call(e,t,i);var n=t.getContext("2d"),a=t.width,o=t.height,s=t.style.width,u=t.style.height,d=i.orientation;if(d&&!(d>8))switch(d>4&&(t.width=o,t.height=a,t.style.width=u,t.style.height=s),d){case 2:n.translate(a,0),n.scale(-1,1);break;case 3:n.translate(a,o),n.rotate(Math.PI);break;case 4:n.translate(0,o),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-o);break;case 7:n.rotate(.5*Math.PI),n.translate(a,-o),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-a,0)}},e.getTransformedOptions=function(t,r){var n,a,o=i.call(e,t,r),s=o.orientation;if(!s||s>8||1===s)return o;n={};for(a in o)o.hasOwnProperty(a)&&(n[a]=o[a]);switch(o.orientation){case 2:n.left=o.right,n.right=o.left;break;case 3:n.left=o.right,n.top=o.bottom,n.right=o.left,n.bottom=o.top;break;case 4:n.top=o.bottom,n.bottom=o.top;break;case 5:n.left=o.top,n.top=o.left,n.right=o.bottom,n.bottom=o.right;break;case 6:n.left=o.top,n.top=o.right,n.right=o.bottom,n.bottom=o.left;break;case 7:n.left=o.bottom,n.top=o.right,n.right=o.top,n.bottom=o.left;break;case 8:n.left=o.bottom,n.top=o.left,n.right=o.top,n.bottom=o.right}return o.orientation>4&&(n.maxWidth=o.maxHeight,n.maxHeight=o.maxWidth,n.minWidth=o.minHeight,n.minHeight=o.minWidth,n.sourceWidth=o.sourceHeight,n.sourceHeight=o.sourceWidth),n}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):e("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,r,i){i=i||{};var n=this,a=i.maxMetaDataSize||262144,o={},s=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);(s||!e.readFile(e.blobSlice.call(t,0,a),function(t){if(t.target.error)return console.log(t.target.error),void r(o);var a,s,u,d,l=t.target.result,h=new DataView(l),c=2,f=h.byteLength-4,g=c;if(65496===h.getUint16(0)){for(;f>c&&(a=h.getUint16(c),a>=65504&&65519>=a||65534===a);){if(s=h.getUint16(c+2)+2,c+s>h.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(u=e.metaDataParsers.jpeg[a])for(d=0;d<u.length;d+=1)u[d].call(n,h,c,s,o,i);c+=s,g=c}!i.disableImageHead&&g>6&&(o.imageHead=l.slice?l.slice(0,g):new Uint8Array(l).subarray(0,g))}else console.log("Invalid JPEG file: Missing JPEG marker.");r(o)},"readAsArrayBuffer"))&&r(o)}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-meta")):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,r){var i,n,a;if(!r||t+r>e.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(i=[],n=0;r>n;n+=1)a=e.getUint8(t+n),i.push((16>a?"0":"")+a.toString(16));return"data:image/jpeg,%"+i.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,r){return e.getUint16(t,r)},size:2},4:{getValue:function(e,t,r){return e.getUint32(t,r)},size:4},5:{getValue:function(e,t,r){return e.getUint32(t,r)/e.getUint32(t+4,r)},size:8},9:{getValue:function(e,t,r){return e.getInt32(t,r)},size:4},10:{getValue:function(e,t,r){return e.getInt32(t,r)/e.getInt32(t+4,r)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,r,i,n,a,o){var s,u,d,l,h,c,f=e.exifTagTypes[n];if(!f)return void console.log("Invalid Exif data: Invalid tag type.");if(s=f.size*a,u=s>4?r+t.getUint32(i+8,o):i+8,u+s>t.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===a)return f.getValue(t,u,o);for(d=[],l=0;a>l;l+=1)d[l]=f.getValue(t,u+l*f.size,o);if(f.ascii){for(h="",l=0;l<d.length&&(c=d[l],"\x00"!==c);l+=1)h+=c;return h}return d},e.parseExifTag=function(t,r,i,n,a){var o=t.getUint16(i,n);a.exif[o]=e.getExifValue(t,r,i,t.getUint16(i+2,n),t.getUint32(i+4,n),n)},e.parseExifTags=function(e,t,r,i,n){var a,o,s;if(r+6>e.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(a=e.getUint16(r,i),o=r+2+12*a,o+4>e.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(s=0;a>s;s+=1)this.parseExifTag(e,t,r+2+12*s,i,n);return e.getUint32(o,i)},e.parseExifData=function(t,r,i,n,a){if(!a.disableExif){var o,s,u,d=r+10;if(1165519206===t.getUint32(r+4)){if(d+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(r+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(d)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(d+2,o))return void console.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(d+4,o),n.exif=new e.ExifMap,s=e.parseExifTags(t,d,d+s,o,n),s&&!a.disableExifThumbnail&&(u={exif:{}},s=e.parseExifTags(t,d,d+s,o,u),u.exif[513]&&(n.exif.Thumbnail=e.getExifThumbnail(t,d+u.exif[513],u.exif[514]))),n.exif[34665]&&!a.disableExifSub&&e.parseExifTags(t,d,d+n.exif[34665],o,n),n.exif[34853]&&!a.disableExifGps&&e.parseExifTags(t,d,d+n.exif[34853],o,n)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-exif"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-exif")):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);
switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,r=e.tags,i=e.map;for(t in r)r.hasOwnProperty(t)&&(i[r[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,r={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e],t&&(r[t]=this.getText(t)));return r}});var Upload=function(){function e(e){n.innerHTML="bezig...";var t=document.createElement("canvas");loadImage.parseMetaData(e,function(r){var o={canvas:!0};r.exif&&(o.orientation=r.exif.get("Orientation")),loadImage(e,function(r){var o=Math.min(r.width,a),s=r.height*o/r.width;t.width=o,t.height=s,pica.resizeCanvas(r,t,function(){t.toBlob(function(e){var t=new XMLHttpRequest,r=new FormData;r.append("type","file"),r.append("image",e),t.open("POST","https://api.imgur.com/3/image",!0),t.setRequestHeader("Authorization","Client-ID c9fd3e097596f79"),t.setRequestHeader("Accept","application/json"),t.addEventListener("load",function(){n.innerHTML="klik of sleep";var e=JSON.parse(this.responseText),t=e.data.link.replace(/^http:/,"");i.value+="\n![beschrijving]("+t+")"}),t.send(r)},e.type,.8)})},o)})}var t=document.getElementById("imgur-file-upload"),r=document.getElementById("forum-editor-form"),i=document.getElementById("body"),n=document.getElementById("imgur-help-text"),a=631;r.addEventListener("dragover",function(e){e.preventDefault()},!0),r.addEventListener("drop",function(t){t.preventDefault(),e(t.dataTransfer.files[0])},!0),t.addEventListener("change",function(t){e(t.target.files[0])})}();