!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pica=e()}}((function(){return function e(t,r,i){function n(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var l=r[o]={exports:{}};t[o][0].call(l.exports,(function(e){var r=t[o][1][e];return n(r||e)}),l,l.exports,e,t,r,i)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t,r){"use strict";t.exports=function(){return document.createElement("canvas")}},{}],2:[function(e,t,r){"use strict";var i=1;t.exports=function(){return i++}},{}],3:[function(e,t,r){"use strict";function i(e){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0}i.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){t.release(e)}),this.acquired[e.id]=e,e},i.prototype.release=function(e){delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout(this.gc.bind(this),500))},i.prototype.gc=function(){var e=Date.now();this.available=this.available.filter((function(t){return!(e-t.lastUsed>2e3&&(t.destroy(),1))})),0!==this.available.length?this.timeoutId=setTimeout(this.gc.bind(this),500):this.timeoutId=0},t.exports=i},{}],4:[function(e,t,r){"use strict";function i(e){return e<0?0:e>255?255:e}function n(e){return Math.round(e*((1<<u)-1))}function a(e,t,r,i,a){var o,s,u,l,h,c,f,g,p,m,v,b,w,y,x,E,S,T=d[e].filter,R=1/i,I=Math.min(1,i),P=d[e].win/I,M=Math.floor(2*(P+1)),C=new Int16Array((M+2)*r),_=0;for(o=0;o<r;o++){for(s=(o+.5)*R+a,u=Math.max(0,Math.floor(s-P)),h=(l=Math.min(t-1,Math.ceil(s+P)))-u+1,c=new Float32Array(h),f=new Int16Array(h),g=0,p=u,m=0;p<=l;p++,m++)g+=v=T((p+.5-s)*I),c[m]=v;for(b=0,m=0;m<c.length;m++)b+=w=c[m]/g,f[m]=n(w);for(f[r>>1]+=n(1-b),y=0;y<f.length&&0===f[y];)y++;if(y<f.length){for(x=f.length-1;x>0&&0===f[x];)x--;E=u+y,S=x-y+1,C[_++]=E,C[_++]=S,C.set(f.subarray(y,x+1),_),_+=S}else C[_++]=0,C[_++]=0}return C}function o(e,t,r,n,a,o){var s,u,d,l,h,c,f,g,p,m,v,b=0,w=0;for(p=0;p<n;p++){for(h=0,m=0;m<a;m++){for(c=o[h++],f=o[h++],g=b+4*c|0,s=u=d=l=0;f>0;f--)l=l+(v=o[h++])*e[g+3]|0,d=d+v*e[g+2]|0,u=u+v*e[g+1]|0,s=s+v*e[g]|0,g=g+4|0;t[w+3]=i(l+8192>>14),t[w+2]=i(d+8192>>14),t[w+1]=i(u+8192>>14),t[w]=i(s+8192>>14),w=w+4*n|0}w=4*(p+1)|0,b=(p+1)*r*4|0}}function s(e,t,r,n,a,o){var s,u,d,l,h,c,f,g,p,m,v,b=0,w=0;for(p=0;p<n;p++){for(h=0,m=0;m<a;m++){for(c=o[h++],f=o[h++],g=b+4*c|0,s=u=d=l=0;f>0;f--)l=l+(v=o[h++])*e[g+3]|0,d=d+v*e[g+2]|0,u=u+v*e[g+1]|0,s=s+v*e[g]|0,g=g+4|0;t[w+3]=i(l+8192>>14),t[w+2]=i(d+8192>>14),t[w+1]=i(u+8192>>14),t[w]=i(s+8192>>14),w=w+4*n|0}w=4*(p+1)|0,b=(p+1)*r*4|0}}var u=14,d=[{win:.5,filter:function(e){return e>=-.5&&e<.5?1:0}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}];t.exports=function(e){var t=e.src,r=e.width,i=e.height,n=e.toWidth,u=e.toHeight,d=e.scaleX||e.toWidth/e.width,l=e.scaleY||e.toHeight/e.height,h=e.offsetX||0,c=e.offsetY||0,f=e.dest||new Uint8Array(n*u*4),g=void 0===e.quality?3:e.quality,p=e.alpha||!1;if(r<1||i<1||n<1||u<1)return[];var m=a(g,r,n,d,h),v=a(g,i,u,l,c),b=new Uint8Array(n*i*4);return o(t,b,r,i,n,m),s(b,f,i,n,u,v),p||function(e,t,r){for(var i=3,n=t*r*4|0;i<n;)e[i]=255,i=i+4|0}(f,n,u),f}},{}],5:[function(e,t,r){"use strict";function i(e,t,r){for(var i,n,a,o,s,u=t*r,d=new Uint16Array(u),l=0;l<u;l++)i=e[4*l],n=e[4*l+1],a=e[4*l+2],s=i>=n&&i>=a?i:n>=a&&n>=i?n:a,o=i<=n&&i<=a?i:n<=a&&n<=i?n:a,d[l]=257*(s+o)>>1;return d}var n=e("glur/mono16");t.exports=function(e,t,r,a,o,s){var u,d,l,h,c,f,g,p,m,v,b,w,y;if(!(0===a||o<.5)){o>2&&(o=2);var x=i(e,t,r),E=new Uint16Array(x);n(E,t,r,o);for(var S=a/100*4096+.5|0,T=257*s|0,R=t*r,I=0;I<R;I++)w=2*(x[I]-E[I]),Math.abs(w)>=T&&(u=e[y=4*I],d=e[y+1],l=e[y+2],f=257*((p=u>=d&&u>=l?u:d>=u&&d>=l?d:l)+(g=u<=d&&u<=l?u:d<=u&&d<=l?d:l))>>1,g===p?h=c=0:(c=f<=32767?4095*(p-g)/(p+g)|0:4095*(p-g)/(510-p-g)|0,h=u===p?65535*(d-l)/(6*(p-g))|0:d===p?21845+(65535*(l-u)/(6*(p-g))|0):43690+(65535*(u-d)/(6*(p-g))|0)),(f+=S*w+2048>>12)>65535?f=65535:f<0&&(f=0),0===c?u=d=l=f>>8:(m=2*f-(v=f<=32767?f*(4096+c)+2048>>12:f+((65535-f)*c+2048>>12))>>8,v>>=8,u=(b=h+21845&65535)>=43690?m:b>=32767?m+(6*(v-m)*(43690-b)+32768>>16):b>=10922?v:m+(6*(v-m)*b+32768>>16),d=(b=65535&h)>=43690?m:b>=32767?m+(6*(v-m)*(43690-b)+32768>>16):b>=10922?v:m+(6*(v-m)*b+32768>>16),l=(b=h-21845&65535)>=43690?m:b>=32767?m+(6*(v-m)*(43690-b)+32768>>16):b>=10922?v:m+(6*(v-m)*b+32768>>16)),e[y]=u,e[y+1]=d,e[y+2]=l)}},t.exports.lightness=i},{"glur/mono16":11}],6:[function(e,t,r){"use strict";function i(e){var t=Math.round(e);return Math.abs(e-t)<a?t:Math.floor(e)}function n(e){var t=Math.round(e);return Math.abs(e-t)<a?t:Math.ceil(e)}var a=1e-5;t.exports.createRegions=function(e){var t,r,a,o,s,u,d,l=e.toWidth/e.width,h=e.toHeight/e.height,c=i(e.srcTileSize*l)-2*e.destTileBorder,f=i(e.srcTileSize*h)-2*e.destTileBorder,g=[];for(o=0;o<e.toHeight;o+=f)for(a=0;a<e.toWidth;a+=c)(t=a-e.destTileBorder)<0&&(t=0),t+(s=a+c+e.destTileBorder-t)>=e.toWidth&&(s=e.toWidth-t),(r=o-e.destTileBorder)<0&&(r=0),r+(u=o+f+e.destTileBorder-r)>=e.toHeight&&(u=e.toHeight-r),d={toX:t,toY:r,toWidth:s,toHeight:u,toInnerX:a,toInnerY:o,toInnerWidth:c,toInnerHeight:f,offsetX:t/l-i(t/l),offsetY:r/h-i(r/h),scaleX:l,scaleY:h,x:i(t/l),y:i(r/h),width:n(s/l),height:n(u/h)},g.push(d);return g},t.exports.eachLimit=function(e,t,r,i){function n(t){if(!s){if(t)return s=!0,void i(t);++o===e.length?i():a<e.length&&r(e[a++],n)}}0===e.length&&i();for(var a=0,o=0,s=!1;a<t&&a<e.length;)r(e[a++],n)}},{}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./resize_array"),i=e("./unsharp");t.onmessage=function(e){var n=e.data;n.dest=new Uint8Array(n.toWidth*n.toHeight*4),r(n),n.unsharpAmount&&i(n.dest,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),t.postMessage({output:n.dest},[n.dest.buffer])}}},{"./resize_array":4,"./unsharp":5}],8:[function(e,t,r){"use strict";var i=e("./js/resize_array"),n=e("./js/unsharp"),a=e("./js/utils").createRegions,o=e("./js/utils").eachLimit,s=e("./js/generate_id"),u=e("./js/create_canvas"),d=1024,l=3;t.exports=function(e,t,r,h){var c=t.getContext("2d",{alpha:Boolean(r.alpha)}),f=u();f.width=Math.min(d,e.width),f.height=Math.min(d,e.height);var g=f.getContext("2d",{alpha:Boolean(r.alpha)});g.globalCompositeOperation="copy";var p=a({width:e.naturalWidth||e.width,height:e.naturalHeight||e.height,srcTileSize:d,toWidth:t.width,toHeight:t.height,destTileBorder:Math.ceil(Math.max(l,2.5*r.unsharpRadius|0))});return o(p,1,(function(t,a){g.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var o=g.getImageData(0,0,t.width,t.height),s=c.createImageData(t.toWidth,t.toHeight),u={src:o.data,dest:s.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold};i(u),r.unsharpAmount&&n(u.dest,u.toWidth,u.toHeight,u.unsharpAmount,u.unsharpRadius,u.unsharpThreshold),c.putImageData(s,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),a()}),h),s()},t.exports.terminate=function(){}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/resize_array":4,"./js/unsharp":5,"./js/utils":6}],9:[function(e,t,r){"use strict";var i=e("webworkify"),n=e("./js/worker.js"),a=e("./js/utils").createRegions,o=e("./js/utils").eachLimit,s=e("./js/generate_id"),u=e("./js/create_canvas"),d=e("./js/pool"),l=1024,h=3,c=!1;try{c=-1!==navigator.userAgent.indexOf("Safari")}catch(e){}var f=new d((function(){return{value:i(n),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}})),g={};t.exports=function(e,t,r,i){var n=t.getContext("2d",{alpha:Boolean(r.alpha)}),d=u();d.width=Math.min(l,e.naturalWidth||e.width),d.height=Math.min(l,e.naturalHeight||e.height);var p=d.getContext("2d",{alpha:Boolean(r.alpha)});p.globalCompositeOperation="copy";var m=a({width:e.naturalWidth||e.width,height:e.naturalHeight||e.height,srcTileSize:l,toWidth:t.width,toHeight:t.height,destTileBorder:Math.ceil(Math.max(h,2.5*r.unsharpRadius|0))}),v=1;"undefined"!=typeof navigator&&(v=navigator.hardwareConcurrency||1);var b=r._id||s();return g[b]=!0,o(m,v,(function(t,i){p.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var a={src:p.getImageData(0,0,t.width,t.height).data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold},o=f.acquire();o.value.onmessage=function(e){var r,a,s,u,d;if(o.release(),g[b])if(e.data.err)i(e.data.err);else{if(s=n.createImageData(t.toWidth,t.toHeight),u=e.data.output,(d=s.data).set)d.set(u);else for(r=0,a=u.length;r<a;r++)d[r]=u[r];c?n.putImageData(s,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):n.putImageData(s,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),i()}else i(!0)},o.value.postMessage(a,[a.src.buffer])}),(function(e){g[b]&&(delete g[b],i(e))})),b},t.exports.terminate=function(e){g[e]&&delete g[e]}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/pool":3,"./js/utils":6,"./js/worker.js":7,webworkify:13}],10:[function(e,t,r){"use strict";function i(e){try{(window.console.error||window.console.log).call(window.console,e)}catch(e){}}function n(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("gl error "+t)}function a(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(i("Shader compile error: "+e.getShaderInfoLog(n)+". Source: `"+r+"`"),e.deleteShader(n),null)}function o(e,t,r){var a=e.createProgram();return e.attachShader(a,t),e.attachShader(a,r),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(i("Program linking error: "+e.getProgramInfoLog(a)),e.deleteProgram(a)),n(e),a}function s(e,t,r,i,a){var o=e.getAttribLocation(t,r);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,a.elementSize,e.FLOAT,!1,0,0),n(e)}function u(e,t,r){var i=e.createTexture();return e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),n(e),i}function d(e,t,r,i){var a=function(e,t,r,i){var a=e.createTexture();return e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,i,0,e.RGBA,e.UNSIGNED_BYTE,null),n(e),a}(e,t,r,i),o=e.getParameter(e.FRAMEBUFFER_BINDING),s=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),n(e),{fbo:s,texture:a,oldFbo:o}}function l(e,t,r,i){var n=e+r,a=t+i;return[e,t,n,t,e,a,e,a,n,t,n,a]}function h(e,t){var r=a(e,e.VERTEX_SHADER,p["#vsh-basic"]),i=a(e,e.FRAGMENT_SHADER,function(e){function t(e){return e.toFixed(20)}for(var r=p["#fsh-lanczos1d-optimized-tpl"],i=e.direction,n=e.texW/e.destW,a=e.texH/e.destH,o="horizontal"===i?n:a,s=m[3].filter,u=m[3].win,d="horizontal"===i,l=1/e.texW,h=1/e.texH,c=d?l:h,f=2*Math.ceil(u*o),g="float total = 0.0;\ngl_FragColor = vec4(0.0);\n",v=0;v<f+1;v++){var b=v-f/2,w=s(b/o),y=c*b,x=d?0:y;g+="addPoint(vec2("+t(d?y:0)+", "+t(x)+"), "+t(w)+", total);\n"}return g+="gl_FragColor /= vec4(total);",r.replace("__CODE__",g)}(t));return o(e,r,i)}function c(e,t,r,i,a,o,u,c,f){var g=h(e,{direction:o,texW:r,texH:i,destW:u,destH:c});e.useProgram(g),function(e,t,r,i){var n=e.getUniformLocation(t,r);e.uniform1i(n,i)}(e,g,"u_image",t),function(e,t,r,i,n){var a=e.getUniformLocation(t,r);e.uniform2f(a,i,n)}(e,g,"u_resolution",u,c),s(e,g,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),s(e,g,"a_position",f?l(0,c,u,-c):l(0,0,u,c),{elementSize:2}),e.viewport(0,0,u,c);var p=d(e,a,u,c);return e.viewport(0,0,u,c),e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,p.oldFbo),n(e),p}var f=e("./js/unsharp"),g=e("./js/generate_id"),p={"#vsh-basic":"precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n","#fsh-lanczos1d-optimized-tpl":"precision highp float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image;\n\n#define addPoint(offset, kv, total)   {vec2 pos = v_texCoord + offset; gl_FragColor += texture2D(u_image, pos) * kv; total += kv; }\n\nvoid main()\n{\n__CODE__\n}\n"},m=[{win:.5,filter:function(e){return e>=-.5&&e<.5?1:0}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}];t.exports=function(e,t,r,n){var a,o;try{(o=document.createElement("canvas")).id="pica-webgl-temporarry-canvas",o.height=t.height,o.width=t.width,document.body.appendChild(o),a=function(e){return e.getContext("webgl")||e.getContext("experimental-webgl")}(o);var s=function(e,t,r){var i=e.naturalWidth||e.width,n=e.naturalHeight||e.height,a=t.canvas.width,o=t.canvas.height;u(t,0,e),c(t,0,i,n,1,"horizontal",a,n,!1);var s=c(t,1,a,n,2,"vertical",a,o,!0);t.flush();var d=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,d),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s.texture,0);var l=t.checkFramebufferStatus(t.FRAMEBUFFER);if(l!==t.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+l);r.alpha||(t.clearColor(1,1,1,1),t.colorMask(!1,!1,!1,!0),t.clear(t.COLOR_BUFFER_BIT));var h=new Uint8Array(a*o*4);t.readPixels(0,0,a,o,t.RGBA,t.UNSIGNED_BYTE,h);var g=void 0===r.unsharpAmount?0:0|r.unsharpAmount,p=void 0===r.unsharpRadius?0:r.unsharpRadius,m=void 0===r.unsharpThreshold?0:0|r.unsharpThreshold;return g&&f(h,a,o,g,p,m),h}(e,a,r);a.finish(),document.body.removeChild(o);var d=t.getContext("2d"),l=d.createImageData(t.width,t.height);l.data.set(s),d.putImageData(l,0,0),n(null,s)}catch(e){i(e),a.finish(),document.body.removeChild(o),n(e)}return g()},t.exports.terminate=function(){}},{"./js/generate_id":2,"./js/unsharp":5}],11:[function(e,t,r){function i(e){e<.5&&(e=.5);var t=Math.exp(.527076)/e,r=Math.exp(-t),i=Math.exp(-2*t),n=(1-r)*(1-r)/(1+2*t*r-i);return a=n,o=n*(t-1)*r,s=n*(t+1)*r,u=-n*i,d=2*r,l=-i,new Float32Array([a,o,s,u,d,l,(a+o)/(1-d-l),(s+u)/(1-d-l)])}function n(e,t,r,i,n,a){var o,s,u,d,l,h,c,f,g,p,m,v,b,w;for(g=0;g<a;g++){for(c=g,f=0,d=l=(o=e[h=g*n])*i[6],m=i[0],v=i[1],b=i[4],w=i[5],p=0;p<n;p++)u=(s=e[h])*m+o*v+d*b+l*w,l=d,d=u,o=s,r[f]=d,f++,h++;for(f--,c+=a*(n-1),d=l=(o=e[--h])*i[7],s=o,m=i[2],v=i[3],p=n-1;p>=0;p--)u=s*m+o*v+d*b+l*w,l=d,d=u,o=s,s=e[h],t[c]=r[f]+d,h--,f--,c-=a}}var a,o,s,u,d,l;t.exports=function(e,t,r,a){if(a){var o=new Uint16Array(e.length),s=new Float32Array(Math.max(t,r)),u=i(a);n(e,o,s,u,t,r),n(o,e,s,u,r,t)}}},{}],12:[function(e,t,r){"use strict";function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,o,s=i(e),u=1;u<arguments.length;u++){for(var d in r=Object(arguments[u]))n.call(r,d)&&(s[d]=r[d]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var l=0;l<o.length;l++)a.call(r,o[l])&&(s[o[l]]=r[o[l]])}}return s}},{}],13:[function(e,t,r){var i=arguments[3],n=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){for(var r,s=Object.keys(a),u=0,d=s.length;u<d;u++){var l=s[u],h=a[l].exports;if(h===e||h&&h.default===e){r=l;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var c={};for(u=0,d=s.length;u<d;u++){c[l=s[u]]=l}n[r]=[Function(["require","module","exports"],"("+e+")(self)"),c]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[r]=r,n[f]=[Function(["require"],"var f = require("+o(r)+");(f.default ? f.default : f)(self);"),g];var p={};!function e(t){for(var r in p[t]=!0,n[t][1]){var i=n[t][1][r];p[i]||e(i)}}(f);var m="("+i+")({"+Object.keys(p).map((function(e){return o(e)+":["+n[e][0]+","+o(n[e][1])+"]"})).join(",")+"},{},["+o(f)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return b;var w=v.createObjectURL(b),y=new Worker(w);return y.objectURL=w,y}},{}],"/":[function(e,t,r){"use strict";function i(e){return"[object Function]"===function(e){return Object.prototype.toString.call(e)}(e)}var n="undefined"!=typeof window&&"Worker"in window;if(n)try{e("webworkify")((function(){})).terminate()}catch(e){n=!1}var a,o=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(((a=document.createElement("canvas")).getContext("webgl")||a.getContext("experimental-webgl"))&&(o=!0))}catch(e){}finally{a=null}var s=e("./lib/resize_js"),u=e("./lib/resize_js_ww"),d=e("./lib/resize_webgl"),l=e("./lib/js/resize_array"),h=e("./lib/js/unsharp"),c=e("object-assign");r.resizeCanvas=function e(t,a,l,h){if(i(l)&&(h=l,l={}),isNaN(l)||(l={quality:l,alpha:!1}),o||(r.WEBGL=!1),o&&r.WEBGL){r.debug("Resize canvas with WebGL");var f=d(t,a,l,(function(i){i?(r.debug("WebGL resize failed, do fallback and cancel next attempts"),r.debug(i),o=!1,e(t,a,c({},l,{_id:f}),h)):h()}));return f}return n||(r.WW=!1),n&&r.WW?(r.debug("Resize buffer in WebWorker"),u(t,a,l,h)):(r.debug("Resize buffer sync (freeze event loop)"),s(t,a,l,h))},r.resizeBuffer=function(e,t){var r={src:e.src,dest:e.dest,width:0|e.width,height:0|e.height,toWidth:0|e.toWidth,toHeight:0|e.toHeight,quality:e.quality,alpha:e.alpha,unsharpAmount:e.unsharpAmount,unsharpRadius:e.unsharpRadius,unsharpThreshold:e.unsharpThreshold};r.dest=l(r),r.unsharpAmount&&h(r.dest,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),t(null,r.dest)},r.terminate=function(e){s.terminate(e),u.terminate(e),d.terminate(e)},r.WW=n,r.WEBGL=!1,r.debug=function(){}},{"./lib/js/resize_array":4,"./lib/js/unsharp":5,"./lib/resize_js":8,"./lib/resize_js_ww":9,"./lib/resize_webgl":10,"object-assign":12,webworkify:13}]},{},[])("/")})),function(e){"use strict";var t=function(e,r,i){var n,a,o=document.createElement("img");if(o.onerror=r,o.onload=function(){!a||i&&i.noRevoke||t.revokeObjectURL(a),r&&r(t.scale(o,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))n=a=t.createObjectURL(e),o._type=e.type;else{if("string"!=typeof e)return!1;n=e,i&&i.crossOrigin&&(o.crossOrigin=i.crossOrigin)}return n?(o.src=n,o):t.readFile(e,(function(e){var t=e.target;t&&t.result?o.src=t.result:r&&r(e)}))},r=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e,t){var r,i,n,a,o=t.aspectRatio;if(!o)return t;for(i in r={},t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r.crop=!0,(n=e.naturalWidth||e.width)/(a=e.naturalHeight||e.height)>o?(r.maxWidth=a*o,r.maxHeight=a):(r.maxWidth=n,r.maxHeight=n/o),r},t.renderImageToCanvas=function(e,t,r,i,n,a,o,s,u,d){return e.getContext("2d").drawImage(t,r,i,n,a,o,s,u,d),e},t.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},t.scale=function(e,r){function i(){var e=Math.max((s||y)/y,(u||x)/x);e>1&&(y*=e,x*=e)}function n(){var e=Math.min((a||y)/y,(o||x)/x);1>e&&(y*=e,x*=e)}r=r||{};var a,o,s,u,d,l,h,c,f,g,p,m=document.createElement("canvas"),v=e.getContext||t.hasCanvasOption(r)&&m.getContext,b=e.naturalWidth||e.width,w=e.naturalHeight||e.height,y=b,x=w;if(v&&(h=(r=t.getTransformedOptions(e,r)).left||0,c=r.top||0,r.sourceWidth?(d=r.sourceWidth,void 0!==r.right&&void 0===r.left&&(h=b-d-r.right)):d=b-h-(r.right||0),r.sourceHeight?(l=r.sourceHeight,void 0!==r.bottom&&void 0===r.top&&(c=w-l-r.bottom)):l=w-c-(r.bottom||0),y=d,x=l),a=r.maxWidth,o=r.maxHeight,s=r.minWidth,u=r.minHeight,v&&a&&o&&r.crop?(y=a,x=o,0>(p=d/l-a/o)?(l=o*d/a,void 0===r.top&&void 0===r.bottom&&(c=(w-l)/2)):p>0&&(d=a*l/o,void 0===r.left&&void 0===r.right&&(h=(b-d)/2))):((r.contain||r.cover)&&(s=a=a||s,u=o=o||u),r.cover?(n(),i()):(i(),n())),v){if((f=r.pixelRatio)>1&&(m.style.width=y+"px",m.style.height=x+"px",y*=f,x*=f,m.getContext("2d").scale(f,f)),(g=r.downsamplingRatio)>0&&1>g&&d>y&&l>x)for(;d*g>y;)m.width=d*g,m.height=l*g,t.renderImageToCanvas(m,e,h,c,d,l,0,0,m.width,m.height),d=m.width,l=m.height,(e=document.createElement("canvas")).width=d,e.height=l,t.renderImageToCanvas(e,m,0,0,d,l,0,0,d,l);return m.width=y,m.height=x,t.transformCoordinates(m,r),t.renderImageToCanvas(m,e,h,c,d,l,0,0,y,x)}return e.width=y,e.height=x,e},t.createObjectURL=function(e){return!!r&&r.createObjectURL(e)},t.revokeObjectURL=function(e){return!!r&&r.revokeObjectURL(e)},t.readFile=function(e,t,r){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,i[r=r||"readAsDataURL"])return i[r](e),i}return!1},"function"==typeof define&&define.amd?define((function(){return t})):"object"==typeof module&&module.exports?module.exports=t:e.loadImage=t}(window),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):e("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}((function(e){"use strict";var t=e.hasCanvasOption,r=e.transformCoordinates,i=e.getTransformedOptions;e.hasCanvasOption=function(r){return!!r.orientation||t.call(e,r)},e.transformCoordinates=function(t,i){r.call(e,t,i);var n=t.getContext("2d"),a=t.width,o=t.height,s=t.style.width,u=t.style.height,d=i.orientation;if(d&&!(d>8))switch(d>4&&(t.width=o,t.height=a,t.style.width=u,t.style.height=s),d){case 2:n.translate(a,0),n.scale(-1,1);break;case 3:n.translate(a,o),n.rotate(Math.PI);break;case 4:n.translate(0,o),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-o);break;case 7:n.rotate(.5*Math.PI),n.translate(a,-o),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-a,0)}},e.getTransformedOptions=function(t,r){var n,a,o=i.call(e,t,r),s=o.orientation;if(!s||s>8||1===s)return o;for(a in n={},o)o.hasOwnProperty(a)&&(n[a]=o[a]);switch(o.orientation){case 2:n.left=o.right,n.right=o.left;break;case 3:n.left=o.right,n.top=o.bottom,n.right=o.left,n.bottom=o.top;break;case 4:n.top=o.bottom,n.bottom=o.top;break;case 5:n.left=o.top,n.top=o.left,n.right=o.bottom,n.bottom=o.right;break;case 6:n.left=o.top,n.top=o.right,n.right=o.bottom,n.bottom=o.left;break;case 7:n.left=o.bottom,n.top=o.right,n.right=o.top,n.bottom=o.left;break;case 8:n.left=o.bottom,n.top=o.left,n.right=o.top,n.bottom=o.right}return o.orientation>4&&(n.maxWidth=o.maxHeight,n.maxHeight=o.maxWidth,n.minWidth=o.minHeight,n.minHeight=o.minWidth,n.sourceWidth=o.sourceHeight,n.sourceHeight=o.sourceWidth),n}})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):e("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}((function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,r,i){var n=this,a=(i=i||{}).maxMetaDataSize||262144,o={};(!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice)||!e.readFile(e.blobSlice.call(t,0,a),(function(t){if(t.target.error)return console.log(t.target.error),void r(o);var a,s,u,d,l=t.target.result,h=new DataView(l),c=2,f=h.byteLength-4,g=c;if(65496===h.getUint16(0)){for(;f>c&&((a=h.getUint16(c))>=65504&&65519>=a||65534===a);){if(c+(s=h.getUint16(c+2)+2)>h.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(u=e.metaDataParsers.jpeg[a])for(d=0;d<u.length;d+=1)u[d].call(n,h,c,s,o,i);g=c+=s}!i.disableImageHead&&g>6&&(l.slice?o.imageHead=l.slice(0,g):o.imageHead=new Uint8Array(l).subarray(0,g))}else console.log("Invalid JPEG file: Missing JPEG marker.");r(o)}),"readAsArrayBuffer"))&&r(o)}})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-meta")):e(window.loadImage)}((function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,r){var i,n,a;if(r&&!(t+r>e.byteLength)){for(i=[],n=0;r>n;n+=1)a=e.getUint8(t+n),i.push((16>a?"0":"")+a.toString(16));return"data:image/jpeg,%"+i.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,r){return e.getUint16(t,r)},size:2},4:{getValue:function(e,t,r){return e.getUint32(t,r)},size:4},5:{getValue:function(e,t,r){return e.getUint32(t,r)/e.getUint32(t+4,r)},size:8},9:{getValue:function(e,t,r){return e.getInt32(t,r)},size:4},10:{getValue:function(e,t,r){return e.getInt32(t,r)/e.getInt32(t+4,r)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,r,i,n,a,o){var s,u,d,l,h,c,f=e.exifTagTypes[n];if(f){if(!((u=(s=f.size*a)>4?r+t.getUint32(i+8,o):i+8)+s>t.byteLength)){if(1===a)return f.getValue(t,u,o);for(d=[],l=0;a>l;l+=1)d[l]=f.getValue(t,u+l*f.size,o);if(f.ascii){for(h="",l=0;l<d.length&&"\0"!==(c=d[l]);l+=1)h+=c;return h}return d}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},e.parseExifTag=function(t,r,i,n,a){var o=t.getUint16(i,n);a.exif[o]=e.getExifValue(t,r,i,t.getUint16(i+2,n),t.getUint32(i+4,n),n)},e.parseExifTags=function(e,t,r,i,n){var a,o,s;if(r+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((o=r+2+12*(a=e.getUint16(r,i)))+4>e.byteLength)){for(s=0;a>s;s+=1)this.parseExifTag(e,t,r+2+12*s,i,n);return e.getUint32(o,i)}console.log("Invalid Exif data: Invalid directory size.")}},e.parseExifData=function(t,r,i,n,a){if(!a.disableExif){var o,s,u,d=r+10;if(1165519206===t.getUint32(r+4)){if(d+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(r+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(d)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(d+2,o))return void console.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(d+4,o),n.exif=new e.ExifMap,(s=e.parseExifTags(t,d,d+s,o,n))&&!a.disableExifThumbnail&&(u={exif:{}},s=e.parseExifTags(t,d,d+s,o,u),u.exif[513]&&(n.exif.Thumbnail=e.getExifThumbnail(t,d+u.exif[513],u.exif[514]))),n.exif[34665]&&!a.disableExifSub&&e.parseExifTags(t,d,d+n.exif[34665],o,n),n.exif[34853]&&!a.disableExifGps&&e.parseExifTags(t,d,d+n.exif[34853],o,n)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)})),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-exif"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-exif")):e(window.loadImage)}((function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,r=e.tags,i=e.map;for(t in r)r.hasOwnProperty(t)&&(i[r[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,r={};for(e in this)this.hasOwnProperty(e)&&((t=this.tags[e])&&(r[t]=this.getText(t)));return r}}));var Upload=function(){var e=document.getElementById("imgur-file-upload"),t=document.getElementById("forum-editor-form"),r=document.getElementById("body"),i=document.getElementById("imgur-help-text");function n(e){i.innerHTML="bezig...";var t=document.createElement("canvas");loadImage.parseMetaData(e,(function(n){var a={canvas:!0};n.exif&&(a.orientation=n.exif.get("Orientation")),loadImage(e,(function(n){var a=Math.min(n.width,631),o=n.height*a/n.width;t.width=a,t.height=o,pica.resizeCanvas(n,t,(function(){t.toBlob((function(e){var t=new XMLHttpRequest,n=new FormData;n.append("type","file"),n.append("image",e),t.open("POST","https://api.imgur.com/3/image",!0),t.setRequestHeader("Authorization","Client-ID c9fd3e097596f79"),t.setRequestHeader("Accept","application/json"),t.addEventListener("load",(function(){i.innerHTML="klik of sleep";var e=JSON.parse(this.responseText).data.link.replace(/^http:/,"");r.value+="\n![beschrijving]("+e+")"})),t.send(n)}),e.type,.8)}))}),a)}))}t.addEventListener("dragover",(function(e){e.preventDefault()}),!0),t.addEventListener("drop",(function(e){e.preventDefault(),n(e.dataTransfer.files[0])}),!0),e.addEventListener("change",(function(e){n(e.target.files[0])}))}();